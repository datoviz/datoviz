/*************************************************************************************************/
/*  Testing baker                                                                                */
/*************************************************************************************************/



/*************************************************************************************************/
/*  Includes                                                                                     */
/*************************************************************************************************/

#include "scene/test_baker.h"
#include "request.h"
#include "scene/array.h"
#include "scene/baker.h"
#include "scene/dual.h"
#include "test.h"
#include "testing.h"



/*************************************************************************************************/
/*  Typedefs                                                                                     */
/*************************************************************************************************/



/*************************************************************************************************/
/*  Structs                                                                                      */
/*************************************************************************************************/



/*************************************************************************************************/
/*  Baker tests                                                                                  */
/*************************************************************************************************/

int test_baker_1(TstSuite* suite)
{
    DvzRequester* rqr = dvz_requester();
    dvz_requester_begin(rqr);

    // attr0: 10 // binding 0
    // attr1: 20 // binding 0
    // attr2: 40 // binding 1
    // slot0: 50
    // slot1: 60

    DvzBaker* baker = dvz_baker(rqr, 0);

    dvz_baker_vertex(baker, 0, 30);
    dvz_baker_vertex(baker, 1, 40);

    dvz_baker_attr(baker, 0, 0, 0, 10);
    dvz_baker_attr(baker, 1, 0, 0, 20);
    dvz_baker_attr(baker, 2, 1, 0, 40);

    dvz_baker_slot(baker, 0, 50);
    dvz_baker_slot(baker, 1, 60);

    dvz_baker_duals(baker, 1);

    dvz_requester_print(rqr);

    dvz_baker_destroy(baker);
    dvz_requester_destroy(rqr);
    return 0;
}
