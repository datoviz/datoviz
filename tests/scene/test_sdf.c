/*************************************************************************************************/
/*  Testing sdf                                                                                  */
/*************************************************************************************************/



/*************************************************************************************************/
/*  Includes                                                                                     */
/*************************************************************************************************/

#include "test_sdf.h"
#include "scene/sdf.h"
#include "test.h"
#include "testing.h"
#include "testing_utils.h"



/*************************************************************************************************/
/*  Sdf test utils                                                                               */
/*************************************************************************************************/



/*************************************************************************************************/
/*  Sdf tests                                                                                    */
/*************************************************************************************************/

int test_sdf_1(TstSuite* suite)
{
    ANN(suite);
    const char* svg_path = "M10,10 L90,10 L90,90 L10,90 Z";
    uint32_t w = 100;
    uint32_t h = 100;

    char imgpath[1024];
    snprintf(imgpath, sizeof(imgpath), "%s/sdf_1.png", ARTIFACTS_DIR);
    uint8_t* rgb = dvz_svg_sdf(svg_path, w, h);
    dvz_write_png(imgpath, w, h, rgb);

    snprintf(imgpath, sizeof(imgpath), "%s/sdf_2.png", ARTIFACTS_DIR);
    uint8_t* rgb2 = dvz_svg_msdf(svg_path, w, h);
    dvz_write_png(imgpath, w, h, rgb2);

    FREE(rgb);
    FREE(rgb2);
    return 0;
}
